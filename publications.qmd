---
title: "Publications"
listing:
  contents: file/publications.yml
  type: default
  sort: "year: desc"
  template: file/pub-template.html   # <-- ton fichier HTML créé
---

<!-- Barre d'actions (le menu sera rempli automatiquement) -->

::: listing-actions
<label for="selTopcat" style="margin-right:8px;">Catégorie :</label> <select id="selTopcat"> <option value="">— Toutes —</option> </select> <button id="resetFilters" class="btn btn-outline-secondary btn-sm" style="margin-left:8px;"> Réinitialiser </button>
:::

```{=html}
<style>
.pub-card { padding: 12px 14px; border: 1px solid #eaeaea; border-radius: 10px; background: #fff; }
.pub-title { font-size: 1.0rem; font-weight: 600; line-height: 1.3; margin-bottom: 4px; }
.pub-authors { color: #4a4a4a; margin-bottom: 2px; }
.pub-venue { color: #2f3b4a; margin-bottom: 6px; }
.pub-type { font-style: italic; color: #5a6a7a; }
.pub-link a { text-decoration: none; }
.pub-tags { margin-top: 6px; }
.badge { display:inline-block; padding: 2px 8px; border-radius: 999px; background:#eef2f7; color:#2f3b4a; font-size:.75rem; margin-right:6px; margin-bottom:4px; }
.listing-actions { margin: 10px 0 14px; }
</style>
```

```{=html}
<script>
// Auto-remplit le menu Catégorie à partir des cartes, puis applique le filtre
window.addEventListener('DOMContentLoaded', function() {
  const select = document.getElementById('selTopcat');
  const reset  = document.getElementById('resetFilters');

  // lit le bloc caché .pub-topcat (dans ton template) et split sur "||"
  function getTopcatsFromCard(card) {
    const raw = (card.querySelector('.pub-topcat')?.textContent || '').trim();
    return raw.split('||').map(s => s.trim()).filter(Boolean);
  }

  // collecte toutes les topcat uniques présentes dans la page
  const set = new Set();
  document.querySelectorAll('.quarto-listing .pub-card').forEach(card => {
    getTopcatsFromCard(card).forEach(v => set.add(v));
  });
  [...set].sort().forEach(v => {
    const opt = document.createElement('option');
    opt.value = v; opt.textContent = v;
    select.appendChild(opt);
  });

  function applyFilter() {
    const wanted = (select?.value || '').trim();
    document.querySelectorAll('.quarto-listing .pub-card').forEach(card => {
      const show = !wanted || getTopcatsFromCard(card).includes(wanted);
      card.style.display = show ? '' : 'none';
    });
  }

  if (select) select.addEventListener('change', applyFilter);
  if (reset)  reset.addEventListener('click', () => { if (select) select.value = ''; applyFilter(); });

  // première application : tout afficher
  applyFilter();
});
</script>
```
